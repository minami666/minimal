= render "partial/header"

.roomimages_show
  .roomimages_show__topbox
    = link_to "#{@user.nickname}さん",user_path(@user)
    の部屋
  .roomimages_show__room_detail
    .roomimages_show__room_detail__left
      = image_tag @room.image.url,class: "roomshowradius",size: "500x500"
    .roomimages_show__room_detail__right
      .roomimages_show__room_detail__right__text
        = @room.text
      -# =============== いいね ===============
      .roomimages_show__room_detail__right__like
        .roomimages_show__room_detail__right__like__delete
          - if user_signed_in?
            - if current_user.already_liked?(@room)
              = button_to 'いいね!を取り消す', roomimage_roomlike_path(@room), method: :delete,local: true,class: "likesbutton--delete"
            -  else
              = button_to 'いいね!', roomimage_roomlikes_path(@room),local: true,class: "likesbutton--do"

        .roomimages_show__room_detail__right__like__counts
          いいね数
          = @room.roomlikes.count

        .roomimages_show__room_detail__right__like__users
          .roomimages_show__room_detail__right__like__users--title
            いいねしたユーザー
          .roomimages_show__room_detail__right__like__users--userimages
            - @room.liked_users.last(10).each do |user|
              = image_tag user.image.url,size: "40x40", class: "roomimages_show__likeduser__image"

  .roomimages_show__commentbox
    .roomimages_show__commentbox__form
    = form_for(@comment,url: roomimage_comments_path(roomimage_id: params[:id]),method: :post) do |c|
      .roomimages_show__commentbox__form__text
        = c.text_area :text,placeholder: "本文",class: "comment"
      .roomimages_show__commentbox__form__text__submit
        = c.submit "投稿",class: "submit"
    .roomimages_show__commentbox__comments

= image_tag @room.image.url,class: "roomshowradius wrapper__roomimages_modal"

= render "partial/footer"

-# コメント欄の参考
-# -if current_user
-#   = form_with(model: [@tweet, @comment], local: true, id: "new_comment") do |form|
-#     = form.text_area :text, placeholder: "コメントする", rows: "2", class: "textbox"
-#     = form.submit "SEND", class: "form__submit"
-# - else
-#   コメントの投稿には新規登録/ログインが必要です


-# コメント一覧
-# - if @comments
-# - @comments.each do |comment|
-#   = link_to comment.user.nickname, "/users/#{comment.user_id}"
-#   = comment.text